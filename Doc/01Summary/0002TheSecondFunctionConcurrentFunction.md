# 1.2 操作系统的第二个功能——并发功能

作者zobol:关于操作系统概论-并发功能，我给出下列问题：

* [1.什么是并发功能？并发功能是**必要的**吗？](#问1什么是并发功能并发功能是必要的吗)  
* [2.并发功能必须要求拥有**多核CPU**吗？](#问2并发功能必须要求拥有多核CPU吗)  
* [3.**多核CPU和单核CPU**对并发功能的实现，有影响吗?](#问3多核CPU和单核CPU对并发功能的实现有影响吗)  
* [4.并发功能的并发性是**绝对的**，还是**相对的**？](#问4并发功能的并发性是绝对的还是相对的)  
* [5.**GPU显卡**的并发性是如何实现的？](#问5gpu显卡的并发性是如何实现的)  


在虚拟化技术的基础上，我们可以实现并发功能。
### 问1：什么是并发功能？并发功能是必要的吗？
粗略地讲，并发功能就是**同时做多件事情**的能力。

现实中我们遇到的很多问题，都是可以同时计算的，如果我们的计算机操作系统有并发功能那么就可以节省时间，比如**GPU的诞生**。此外很多操作都是有时间限制要求，这就要求我们必须在做一件事情的同时，也要不断地记录运行时间。最常见的就是**计时器功能**。
<p align="center"><img width="600" height="200" src="/LearnOperatingSystem/Photo/03.jpg"></p>
```
没有并发功能，很多实时性的任务，计算机系统都将无法完成。
我们也无法实现一边听歌，一边上网。
```
<p align="center"><img width="400" height="150" src="/LearnOperatingSystem/Photo/04.jpg"></p>

* * *

### 问2：并发功能必须要求拥有多核CPU吗？
不是，并发功能是建立在虚拟化技术的基础上的，并发的进程数和线程数跟CPU的数量无关。就算只有一个单核CPU，操作系统依然可以使用并发功能，实现多线程同步操作。

* * *

### 问3:多核CPU和单核CPU对并发功能的实现，有影响吗?
但是如果计算机系统有多核CPU，操作系统可以拥有更多的线程数量，从而更好地实现并行同步上网听歌功能。此外多核CPU可以实现绝对的并行计算。
>比如假如有两个任务，A需要3分钟，B需要5分钟。操作系统都可以实现让用户感觉这两个任务是同时运行的。但是单核CPU的总运行时间一定是大于等于8分钟的，多核CPU却可以实现大于等于5分钟。

毕竟虽然实现了将硬件资源虚拟化，但硬件资源的总量还是固定不变的，单核CPU的计算力未必小于多核CPU，但是底层无法实现真正的多核计算，肯定实际上还是单行计算的。

* * *

### 问4：并发功能的并发性是绝对的，还是相对的？
大多数情况下都是相对于我们人类感知来讲的并行，也有少部分情况下，是绝对的。
>假如是单核CPU，那么从硬件层面一定是单向的，无法进行并行计算操作。但是操作系统通过不断的切换线程，可以实现一种伪并行，让用户感觉好像是在同时运行多个线程。其实底层还是计算一会A，停下来，计算一会B，只是间隔短人类感受不到。

>假如是多核CPU，那么操作系统可以将两个任务分配个两个计算核心，这样硬件层就实现了绝对的并发性。不过，操作系统的线程数一般都是远大于CPU核心数，所以大多数情况多核也是操作系统提供的相对并发性。

```
是否能否实现真并发，取决于硬件层能否支持并行计算。硬件的并行计算典型就是GPU
```


* * *

### 问5：GPU显卡的并发性是如何实现的？

GPU就是我们平常使用的显卡，用来进行图形计算或矩阵计算。我们一般买的CPU上都会赠送一个集成显卡，没有显卡，我们的计算机屏幕会一片漆黑。

GPU就是特异化的CPU，是矩阵化数量核数的CPU。

图形现实本身是要消耗一定计算能力的（实际占比还不小），早期黑框框的DOS界面一般CPU自己的线性计算能力就能承担。但是随着现代的界面可视化和各种三维游戏的出现导致对新的并行图形计算能力的需求出现。

>每一个二维图像都可以看作是一个矩阵，如果我们每一个矩阵元素都用一个CPU去并行计算，就可以花费计算一个像素的时间，计算出整个图像的数据。

GPU可以看作是由矩阵化数量（比如300×500个）CPU核心的集成，每一个核心的计算能力有限，专门为图形矩阵计算做了硬件优化。

```
GPU是并行，并发性的最典型例子。操作系统的并发性主要是靠复用思想，时间片轮转思想，线程进程思想、
虚拟内存思想以及多核CPU等技术共同实现的。
```






